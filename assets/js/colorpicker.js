!function(r){"use strict";const t=function(){const i=new WeakMap;function o(o,e,c){i.set(this,{type:e?"embed":"popup",$parent:e||r("body"),$container:null,$element:null,selectedColor:o||null,colors:[],callback:c||null,offset:{top:0,left:0}}),this._init()}return o.prototype={_init:function(){var o=i.get(this);this._buildColors(),this._buildDOM(),this._bind(),this._selectColor(o.selectedColor)},_buildDOM:function(){var o=i.get(this),e='<div><div id="mcmd-colorpicker-saved-colors" class="mcmd-colorpicker-colors">'+this._renderSavedColors()+'</div><div class="mcmd-colorpicker-line"></div><div class="mcmd-colorpicker-colors">'+this._renderMainColors()+'</div><div class="mcmd-colorpicker-line"></div><div class="mcmd-colorpicker-row"><div class="mcmd-colorpicker-input-text-wrap"><input class="mcmd-colorpicker-input-text" type="text" maxlength="7"><i class="mcmd-colorpicker-clear">&times;</i></div><div class="mcmd-colorpicker-input-color-wrap"><input class="mcmd-colorpicker-input-color" type="color" value="#ffffff"><div class="mcmd-colorpicker-preview-wrap"><div class="mcmd-colorpicker-preview"></div></div></div><div class="mcmd-colorpicker-button mcmd-colorpicker-button-submit">OK</div></div></div>';o.$container=r(e).toggleClass("mcmd-colorpicker-embed","embed"==o.type).toggleClass("mcmd-colorpicker-popup","popup"==o.type),o.$parent.append(o.$container)},_bind:function(){var o=i.get(this);o.$container.on("click",".mcmd-colorpicker-colors .mcmd-colorpicker-color",this._clickColor.bind(this)),o.$container.on("dblclick",".mcmd-colorpicker-colors .mcmd-colorpicker-color",this._dblclickColor.bind(this)),o.$container.on("click",".mcmd-colorpicker-clear",this._clearColor.bind(this)),o.$container.on("click",".mcmd-colorpicker-button-submit",this._submit.bind(this)),o.$container.find(".mcmd-colorpicker-input-text").on("input",this._setColorFromInput.bind(this)),o.$container.find(".mcmd-colorpicker-input-color").on("input",this._setColorFromPreview.bind(this)),r(window).on("resize",this._resize.bind(this)),document.addEventListener("mousedown",this._mousedown.bind(this),{capture:!0})},_renderMainColors:function(){var e=i.get(this);let c="";for(let o=0;o<3;o++){c+='<div class="mcmd-colorpicker-row">';for(const r of e.colors[o])c+='<div class="mcmd-colorpicker-color" data-color="'+r+'" style="background-color:'+r+'"></div>';c+="</div>"}return c},_renderSavedColors:function(){var o=i.get(this),e=Cookies.get("mcmd-colorpicker-colors")?JSON.parse(Cookies.get("mcmd-colorpicker-colors")):[null,null,null,null,null];let c="";c+='<div class="mcmd-colorpicker-row"><div class="mcmd-colorpicker-color mcmd-colorpicker-color-save" title="add to pallete"></div>';for(const t in o.colors[3]){var r=e[t]||o.colors[3][t];c+='<div class="mcmd-colorpicker-color" data-color="'+r+'" style="background-color:'+r+'"></div>'}return c+="</div>"},_buildColors:function(){var o=i.get(this);o.colors.push(["#e49086","#f2b78f","#fde7ab","#cddf7b","#8fcaf2","#db96d9"]),o.colors.push(["#d35141","#e98746","#fbd25e","#b3cf3c","#46a8e9","#c65bbb"]),o.colors.push(["#aa2b22","#c85f19","#fabc0f","#819526","#1981c8","#9d3aa7"]),o.colors.push(["#000000","#222222","#444444","#666666","#888888"])},_show:function(o){var e=i.get(this);e.$element=r(o.currentTarget),this._place(e.$element),this._selectColor(this.get(e.$element)),e.$container.find("#mcmd-colorpicker-saved-colors").empty().append(this._renderSavedColors()),e.$container.addClass("mcmd-active")},_close:function(){var o=i.get(this);o.$element=null,o.$container.removeClass("mcmd-active")},_mousedown:function(o){var e=i.get(this);!e.$element||e.$element.is(o.target)||e.$container.is(o.target)||e.$container.find(o.target).length||this._close()},_place:function(o){var e=i.get(this),c=document.documentElement,r=(window.scrollX||c.scrollLeft)-(c.clientLeft||0),c=(window.scrollY||c.scrollTop)-(c.clientTop||0),t=o.offset(),l=t.top-c,t=t.left-r;c=o.outerHeight(!1),e.$container.css({top:l+e.offset.top+c,left:t+e.offset.left})},_resize:function(){var o=i.get(this);o.$element&&this._place(o.$element)},_selectColor:function(o){var e=i.get(this);o&&0!=o.length?(e.selectedColor=o,r(".mcmd-colorpicker-input-text",e.$container).val(o),r(".mcmd-colorpicker-input-color",e.$container).val(o),r(".mcmd-colorpicker-preview",e.$container).css({background:o||""})):(e.selectedColor=null,r(".mcmd-colorpicker-input-text",e.$container).val(""),r(".mcmd-colorpicker-input-color",e.$container).val("#ffffff"),r(".mcmd-colorpicker-preview",e.$container).css({background:""}))},_clearColor:function(){this._selectColor()},_saveColor:function(){var o=i.get(this);if(o.selectedColor){var e=Cookies.get("mcmd-colorpicker-colors")?JSON.parse(Cookies.get("mcmd-colorpicker-colors")):[null,null,null,null,null,null];if(e[0]!==o.selectedColor){for(let o=e.length-1;0<o;o--)e[o]=e[o-1];e[0]=o.selectedColor,Cookies.set("mcmd-colorpicker-colors",JSON.stringify(e))}o.$container.find("#mcmd-colorpicker-saved-colors").html(this._renderSavedColors())}},_clickColor:function(o){r(o.currentTarget).hasClass("mcmd-colorpicker-color-save")?this._saveColor():this._selectColor(r(o.currentTarget).attr("data-color"))},_dblclickColor:function(o){r(o.currentTarget).hasClass("mcmd-colorpicker-color-save")||(this._selectColor(r(o.currentTarget).attr("data-color")),this._submit())},_setColorFromInput:function(o){var e=i.get(this);e.selectedColor=r(".mcmd-colorpicker-input-text",e.$container).val(),"#"!=e.selectedColor[0]&&(e.selectedColor="#"+e.selectedColor,r(".mcmd-colorpicker-input-text",e.$container).val(e.selectedColor)),0<e.selectedColor.length?(r(".mcmd-colorpicker-input-color",e.$container).val(e.selectedColor),r(".mcmd-colorpicker-preview",e.$container).css({background:e.selectedColor||""})):(r(".mcmd-colorpicker-input-color",e.$container).val("#fff"),r(".mcmd-colorpicker-preview",e.$container).css({background:""}))},_setColorFromPreview:function(o){this._selectColor(o.target.value)},_submit:function(){var o=i.get(this);o.$element?o.$element.attr({"data-color":o.selectedColor}).css({background:o.selectedColor||""}).trigger("color",o.selectedColor):o.callback&&"function"==typeof o.callback&&o.callback.call(null,o.selectedColor),this._close()},set:function(o,e,c){var r=i.get(this);r.offset.top=c&&c.top?c.top:0,r.offset.left=c&&c.left?c.left:0,o.data("colorpicker")||o.on("click",this._show.bind(this)),o.data({colorpicker:!0}).attr({"data-color":e||null}).css({background:e||""})},get:function(o){return o.data("colorpicker")&&(o=o.attr("data-color"))?o.toUpperCase():null}},o}();window.MEDIACOMMANDER=window.MEDIACOMMANDER||{},window.MEDIACOMMANDER.PLUGINS=window.MEDIACOMMANDER.PLUGINS||{},window.MEDIACOMMANDER.PLUGINS.COLORPICKER=function(o,e,c){return new t(o,e,c)}}(jQuery);